{% extends "base.html" %}
{% block content %}


<div class="search-box">
  <form action="{{ url_for('search') }}" method="POST">
    <input type="text" id="search" name="search" value="" style="width: 305px; height: 40px;">
    <button type="submit" class="btn btn-primary btn-block btn-large" name="search" value="search"
         style="width: 50px;  float: right; " ><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
<path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
</svg></button>
    <p >Search Name/Invoice No/Date(dd/mm/yyyy)</p>
  </form>
</div>

<hr style="margin-left: 320px;">
<div class="container">
  <div class="box">
      <p>Today's Opening Stock : {{stock.oil['today_opening_stock']}}KG</p>
      <p>Current Stock : {{stock.oil['RPG']}}KG</p>
      <p>Available Empty Tins: {{stock.tins_in_stock}}</p>
  </div>
  <div class="box">
      <h6 style="text-align: center"><b>No of Tins sold</b></h6>
      <div style="margin-left: 10px; margin-top: 10px;">
          <a>Total Tins sold : {{daily_tins_count['total_tins']}}</a><br>
          <a>15KG TINS : {{daily_tins_count['15KG']}}</a><br>
          <a>15LTR TINS : {{daily_tins_count['15LTR']}}</a><br>
          <a>14.5KG TINS : {{daily_tins_count['KG14_5']}}</a><br>
          <a>13KG TINS : {{daily_tins_count['KG13']}}</a><br>
      </div>
  </div>
  <div class="box">
      <h6 style="text-align: center"><b>Available Ready Tins</b></h6>
      <label style="margin-left: 10px;">15KG TINS : {{stock.other['15KG']}}</label><br>
      <label style="margin-left: 10px;">15LTR TINS : {{stock.other['15LTR']}}</label><br>
      <label style="margin-left: 10px;">14.5KG TINS : {{stock.other['14_5KG']}}</label><br>
      <label style="margin-left: 10px;">13KG TINS : {{stock.other['13KG']}}</label>
  </div>
  <div class="box">
      <h6 style="text-align: center"><b>Today's Price</b></h6>
      <label style="margin-left: 10px;">15KG TINS :</label>
      <input style="width: 100px; border: none; background-color: #f2f7f8;"><br>
      <label style="margin-left: 10px;">15LTR TINS :</label>
      <input style="width: 100px; border: none; background-color: #f2f7f8;"><br>
      <label style="margin-left: 10px;">14.5KG TINS :</label>
      <input style="width: 100px; border: none; background-color: #f2f7f8;"><br>
      <label style="margin-left: 10px;">13KG TINS :</label>
      <input style="width: 100px; border: none; background-color: #f2f7f8;">
  </div>
</div>



<!-- Pending invoice card -->
{% if card == "pending" %}
<div class="card mb-6 mb-xxl-0">
  <div class="card-header">
    <div class="row align-items-center">
      <div class="col">
        <h3 class="fs-6 mb-0">Payment Pending</h3>
      </div>
      <div class="col-auto my-n3 me-n3">
      </div>
    </div>
  </div>
  <div class="table-responsive">
    <table class="table table-flush align-middle mb-0">
      <thead>
        <tr><th class="fs-sm">Customer Name</th>
        <th class="fs-sm">Status</th>
        <th class="fs-sm">Total Amount</th>
        <th class="fs-sm">Date</th>
      </tr></thead>
      <tbody>
      {% for invoice in invoices: %}
        <tr>
          <td>
            <div class="d-flex align-items-center">
              <a href="{{ url_for('invoice_details', invoice_no=invoice.invoice_no) }}">{{ invoice.invoice_no }}</a>
              <div class="ms-4">
                <div>{{ invoice.customer_details['customer_name'] }}</div>

              </div>
            </div>
          </td>
          <td>
                <span class="badge bg-danger-subtle text-danger">{{ invoice.total_amount['status'] }}</span>
          </td>
          <td>
            <label>{{ invoice.total_amount['overall_amount'] }}</label>
          </td>
          <td>
            {{ invoice.date }}
          </td>
          <td>
            <a href="{{ url_for('update_invoice', invoice_no=invoice.invoice_no, edit='clear') }}">
          <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20" height="20" viewBox="0 0 48 48">
            <linearGradient id="TpFkpHq7AGWb~Tkla4kyga_YDFV6MVN9cNl_gr1" x1="24" x2="24" y1="6.121" y2="42.039" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#9dffce"></stop><stop offset="1" stop-color="#50d18d"></stop></linearGradient><path fill="url(#TpFkpHq7AGWb~Tkla4kyga_YDFV6MVN9cNl_gr1)" d="M40,42H8c-1.1,0-2-0.9-2-2V8c0-1.1,0.9-2,2-2h32c1.1,0,2,0.9,2,2v32C42,41.1,41.1,42,40,42z"></path><linearGradient id="TpFkpHq7AGWb~Tkla4kygb_YDFV6MVN9cNl_gr2" x1="13" x2="36" y1="24.793" y2="24.793" gradientUnits="userSpaceOnUse"><stop offset=".824" stop-color="#135d36"></stop><stop offset=".931" stop-color="#125933"></stop><stop offset="1" stop-color="#11522f"></stop></linearGradient><path fill="url(#TpFkpHq7AGWb~Tkla4kygb_YDFV6MVN9cNl_gr2)" d="M21.293,32.707l-8-8c-0.391-0.391-0.391-1.024,0-1.414l1.414-1.414	c0.391-0.391,1.024-0.391,1.414,0L22,27.758l10.879-10.879c0.391-0.391,1.024-0.391,1.414,0l1.414,1.414	c0.391,0.391,0.391,1.024,0,1.414l-13,13C22.317,33.098,21.683,33.098,21.293,32.707z"></path>
          </svg>
        </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div >
      <a href="{{ url_for('secrets') }}">
          <img style="width: 20px; height: 20px;" src="/static/images/icons8-edit-property-50.png">
        </a>
  </div>
</div>
{% endif %}
<!-- Pending invoice card end -->



<!-- Pending invoice card -->
{% if card == "pending" %}
<div class="delay_card mb-6 mb-xxl-0">
  <div class="card-header">
    <div class="row align-items-center">
      <div class="col" >
          <h3 class="fs-6 mb-0" style="text-align: center; background-color: red;"><b>10 or More Days Pending Invoices</b></h3>
      </div>
      <div class="col-auto my-n3 me-n3">
      </div>
    </div>
  </div>
  <div class="table-responsive">
    <table class="table table-flush align-middle mb-0">
      <thead>
        <tr><th class="fs-sm">Customer Name</th>
        <th class="fs-sm">No of Days</th>
        <th class="fs-sm">Total Amount</th>
        <th class="fs-sm">Date</th>
      </tr></thead>
      <tbody>
      {% for invoice in invoices: %}
        <tr>
          <td>
            <div class="d-flex align-items-center">
<!--              <a href="{{ url_for('invoice_details', invoice_no=invoice.invoice_no) }}">{{ invoice.invoice_no }}</a>-->
              <div class="ms-4">
                <div>{{ invoice.customer_details['customer_name'] }}</div>

              </div>
            </div>
          </td>
          <td>
                <span class="badge bg-danger-subtle text-danger">10</span>
          </td>
          <td>
            <label>{{ invoice.total_amount['overall_amount'] }}</label>
          </td>
          <td>
            {{ invoice.date }}
          </td>
<!--          <td>-->
<!--            <a href="{{ url_for('update_invoice', invoice_no=invoice.invoice_no, edit='clear') }}">-->
<!--          <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20" height="20" viewBox="0 0 48 48">-->
<!--            <linearGradient id="TpFkpHq7AGWb~Tkla4kyga_YDFV6MVN9cNl_gr1" x1="24" x2="24" y1="6.121" y2="42.039" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#9dffce"></stop><stop offset="1" stop-color="#50d18d"></stop></linearGradient><path fill="url(#TpFkpHq7AGWb~Tkla4kyga_YDFV6MVN9cNl_gr1)" d="M40,42H8c-1.1,0-2-0.9-2-2V8c0-1.1,0.9-2,2-2h32c1.1,0,2,0.9,2,2v32C42,41.1,41.1,42,40,42z"></path><linearGradient id="TpFkpHq7AGWb~Tkla4kygb_YDFV6MVN9cNl_gr2" x1="13" x2="36" y1="24.793" y2="24.793" gradientUnits="userSpaceOnUse"><stop offset=".824" stop-color="#135d36"></stop><stop offset=".931" stop-color="#125933"></stop><stop offset="1" stop-color="#11522f"></stop></linearGradient><path fill="url(#TpFkpHq7AGWb~Tkla4kygb_YDFV6MVN9cNl_gr2)" d="M21.293,32.707l-8-8c-0.391-0.391-0.391-1.024,0-1.414l1.414-1.414	c0.391-0.391,1.024-0.391,1.414,0L22,27.758l10.879-10.879c0.391-0.391,1.024-0.391,1.414,0l1.414,1.414	c0.391,0.391,0.391,1.024,0,1.414l-13,13C22.317,33.098,21.683,33.098,21.293,32.707z"></path>-->
<!--          </svg>-->
<!--        </a>-->
<!--          </td>-->
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div >
      <a href="{{ url_for('secrets') }}">
          <img style="width: 20px; height: 20px;" src="/static/images/icons8-edit-property-50.png">
        </a>
  </div>
</div>
{% endif %}
<!-- Pending invoice card end -->







<!-- search card  -->
{% if search == "yes" %}
<div class="card mb-6 mb-xxl-0" style="width: 80%;">
  <div class="card-header">
    <div class="row align-items-center">
      <div class="col">
        <h3 class="fs-6 mb-0">Search Items</h3>
      </div>
      <div class="col-auto my-n3 me-n3">
      </div>
    </div>
  </div>
  <div class="table-responsive">
    <table class="table table-flush align-middle mb-0">
      <thead>
        <tr><th class="fs-sm">Customer Name</th>
        <th class="fs-sm">Status</th>
        <th class="fs-sm">Total Amount</th>
        <th class="fs-sm">Date</th>
      </tr></thead>
      <tbody>
      {% for invoice in invoices_list: %}
        <tr>
          <td>
            <div class="d-flex align-items-center">
              <a href="{{ url_for('invoice_details', invoice_no=invoice.invoice_no) }}">{{ invoice.invoice_no }}</a>
              <div class="ms-4">
                <div>{{ invoice.customer_details['customer_name'] }}</div>

              </div>
            </div>
          </td>
          <td>
            {% if invoice.total_amount['status']  == 'pending' %}
                <span class="badge bg-danger-subtle text-danger">{{ invoice.total_amount['status'] }}</span>
            {% else %}
                <span class="badge bg-success-subtle text-success">{{ invoice.total_amount['status'] }}</span>
            {% endif %}
          </td>
          <td>
            <label>{{ invoice.total_amount['overall_amount'] }}</label>
          </td>
          <td>
            {{ invoice.date }}
          </td>
          <td>
            <a href="{{ url_for('update_invoice', invoice_no=invoice.invoice_no, edit='detail') }}" ><img style="width: 20px; height: 20px;" src="/static/images/icons8-edit-property-50.png"></a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
    <div >
        <a  href="{{ url_for('secrets') }}" class="btn btn-primary btn-large floating-button">Clear</a>
        <label style="margin-left: 56%;"><b>Total  :  </b> {{total}}</label>
      </div>
</div>

{% endif %}

<!-- side card-->
<!--{% if search == "yes" %}-->
<!--<div class="side_card">-->
<!--  <label>Total Amount</label>-->
<!--</div>-->
<!--{% endif %}-->
<!-- side card end -->


{% if edit == "detail" %}
    <div class="search-item">
  <div >
      <form method="POST">
        <div style="width: 99%">
          <a class="ten-day-invoice-details" >Invoice</a>
          <label class="ten-day-invoice-details" style="width: 47%; margin-left: 50px;">Customer Name</label>
          <label class="ten-day-invoice-details" style="width: 12%; "> Amount </label>
          <label class="ten-day-invoice-details" style="width: 10%; "> Status</label>
          <label class="ten-day-invoice-details" style="width: 12%; margin-right: 40px;">Date</label>
          <a href="{{ url_for('invoice_details', invoice_no=invoice.invoice_no) }}" class="ten-day-invoice-details" style="padding-right: 25px; padding-left: 30px;">{{ invoice.invoice_no }}</a>
          <input class="ten-day-invoice-details" name="name" style="width: 50%; " value="{{ invoice.customer_details['customer_name'] }}">
          <input class="ten-day-invoice-details" name="amount" style="width: 12%; " value="{{ invoice.total_amount['overall_amount'] }}">
          <input class="ten-day-invoice-details" name="status" style="width: 11%; " value="{{ invoice.total_amount['status'] }}">
          <label class="ten-day-invoice-details" style="width: 11%; ">{{ invoice.date }}</label>
          <button class="btn-primary" >Save</button>
        </div>
      </form>
  </div>
</div>
    {% endif %}

{% endblock %}